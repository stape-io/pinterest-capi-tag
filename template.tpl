___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Pinterest Conversion API by Stape",
  "categories": [
    "ADVERTISING",
    "MARKETING",
    "CONVERSIONS"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "stape.io",
    "thumbnail": "data:image/png;base64,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"
  },
  "description": "Tag that sends the event data from the GA4/Data Client to Pinterest Conversion API.",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "eventType",
    "radioItems": [
      {
        "value": "standard",
        "displayValue": "Standard",
        "subParams": [
          {
            "type": "SELECT",
            "name": "eventNameStandard",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "page_visit",
                "displayValue": "page_visit"
              },
              {
                "value": "add_to_cart",
                "displayValue": "add_to_cart"
              },
              {
                "value": "add_to_wishlist",
                "displayValue": "add_to_wishlist"
              },
              {
                "value": "add_payment_info",
                "displayValue": "add_payment_info"
              },
              {
                "value": "checkout",
                "displayValue": "checkout"
              },
              {
                "value": "initiate_checkout",
                "displayValue": "initiate_checkout"
              },
              {
                "value": "lead",
                "displayValue": "lead"
              },
              {
                "value": "search",
                "displayValue": "search"
              },
              {
                "value": "signup",
                "displayValue": "signup"
              },
              {
                "value": "subscribe",
                "displayValue": "subscribe"
              },
              {
                "value": "view_category",
                "displayValue": "view_category"
              },
              {
                "value": "view_content",
                "displayValue": "view_content"
              },
              {
                "value": "watch_video",
                "displayValue": "watch_video"
              },
              {
                "value": "custom",
                "displayValue": "custom"
              }
            ],
            "simpleValueType": true,
            "defaultValue": "page_visit"
          }
        ]
      },
      {
        "value": "inherit",
        "subParams": [],
        "displayValue": "Inherit from client"
      }
    ],
    "simpleValueType": true,
    "displayName": "Event Name Setup Method",
    "defaultValue": "standard"
  },
  {
    "type": "SELECT",
    "name": "actionSource",
    "displayName": "Action Source",
    "selectItems": [
      {
        "value": "web",
        "displayValue": "Web"
      },
      {
        "value": "offline",
        "displayValue": "Offline"
      },
      {
        "value": "app_ios",
        "displayValue": "App iOS"
      },
      {
        "value": "app_android",
        "displayValue": "App Android"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "web"
  },
  {
    "type": "TEXT",
    "name": "advertiserId",
    "displayName": "Pinterest Advertiser ID",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "REGEX",
        "args": [
          "549\\d{9}"
        ],
        "errorMessage": "This value should match 549XXXXXXXXX"
      }
    ],
    "help": "You can find it by logging to the Pinterest account that owns your advertiser account, then go to \"ads.pinterest.com\". In the top navigation section, click on \"Viewing: \" and the advertiser id will be the number underneath the ad account name in the drop down menu. If your Pinterest account has multiple ad accounts, make sure you are choosing the proper one that you want to use for owning your API conversion events. Another way to confirm your advertiser id is to navigate to Ads \u003e Overview and look for the id in the URL path. It will look like: \"ads.pinterest.com/advertiser/ADVERTISER_ID/?...\"."
  },
  {
    "type": "TEXT",
    "name": "apiAccessToken",
    "displayName": "API Access Token",
    "simpleValueType": true,
    "help": "To use the Pinterest Conversions API, you need an access token.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "CHECKBOX",
    "name": "testMode",
    "checkboxText": "Test Mode",
    "simpleValueType": true,
    "help": "The events will not be recorded but the API will still return the same response messages. Use this mode to verify your requests are working and your events are constructed correctly."
  },
  {
    "type": "CHECKBOX",
    "name": "useOptimisticScenario",
    "checkboxText": "Use Optimistic Scenario",
    "simpleValueType": true,
    "help": "The tag will call gtmOnSuccess() without waiting for a response from the API. This will speed up sGTM response time however your tag will always return the status fired successfully even in case it is not."
  },
  {
    "displayName": "Server Event Data Override",
    "name": "serverEventDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "serverEventDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "event_id",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "event_time",
                "displayValue": "Event Time"
              },
              {
                "value": "event_source_url",
                "displayValue": "Source URL"
              },
              {
                "value": "opt_out",
                "displayValue": "Opt Out"
              },
              {
                "value": "event_id",
                "displayValue": "Event ID"
              },
              {
                "value": "app_id",
                "displayValue": "App id"
              },
              {
                "value": "app_name",
                "displayValue": "App name"
              },
              {
                "value": "app_version",
                "displayValue": "App version"
              },
              {
                "value": "device_brand",
                "displayValue": "Device brand"
              },
              {
                "value": "device_carrier",
                "displayValue": "Device carrier"
              },
              {
                "value": "device_model",
                "displayValue": "Device model"
              },
              {
                "value": "device_type",
                "displayValue": "Device type"
              },
              {
                "value": "os_version",
                "displayValue": "OS version"
              },
              {
                "value": "wifi",
                "displayValue": "WiFi"
              },
              {
                "value": "language",
                "displayValue": "language"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://s.pinimg.com/ct/docs/conversions_api/dist/v3.html\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can override."
  },
  {
    "displayName": "User Data",
    "name": "userDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "userDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "em",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "em",
                "displayValue": "Email"
              },
              {
                "value": "ph",
                "displayValue": "Phone"
              },
              {
                "value": "ge",
                "displayValue": "Gender"
              },
              {
                "value": "db",
                "displayValue": "Date of Birth"
              },
              {
                "value": "ln",
                "displayValue": "Last Name"
              },
              {
                "value": "fn",
                "displayValue": "First Name"
              },
              {
                "value": "ct",
                "displayValue": "City"
              },
              {
                "value": "st",
                "displayValue": "State"
              },
              {
                "value": "zp",
                "displayValue": "Zip"
              },
              {
                "value": "country",
                "displayValue": "Country"
              },
              {
                "value": "hashed_maids",
                "displayValue": "maids"
              },
              {
                "value": "client_ip_address",
                "displayValue": "Client IP address"
              },
              {
                "value": "client_user_agent",
                "displayValue": "Client user agent"
              },
              {
                "value": "external_id",
                "displayValue": "External ID"
              },
              {
                "value": "click_id",
                "displayValue": "Click ID"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE",
        "newRowButtonText": "Add property"
      }
    ],
    "help": "See \u003ca href\u003d\"https://s.pinimg.com/ct/docs/conversions_api/dist/v3.html\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what user data parameters you can add to the call. If the documentation requires the parameter to be hashed, you \u003cstrong\u003emust\u003c/strong\u003e hash it with SHA256, or the tag will do this automatically before sending the event to Pinterest."
  },
  {
    "displayName": "Custom Data",
    "name": "customDataListGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "name": "customDataList",
        "simpleTableColumns": [
          {
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "defaultValue": "currency",
            "displayName": "Property Name",
            "name": "name",
            "isUnique": true,
            "type": "SELECT",
            "selectItems": [
              {
                "value": "currency",
                "displayValue": "Currency"
              },
              {
                "value": "value",
                "displayValue": "Value"
              },
              {
                "value": "content_ids",
                "displayValue": "Content IDs"
              },
              {
                "value": "contents",
                "displayValue": "Contents"
              },
              {
                "value": "num_items",
                "displayValue": "Num Items"
              },
              {
                "value": "order_id",
                "displayValue": "Order ID"
              },
              {
                "value": "search_string",
                "displayValue": "Search string"
              },
              {
                "value": "opt_out_type",
                "displayValue": "Opt Out Type"
              },
              {
                "value": "content_name",
                "displayValue": "Content Name"
              },
              {
                "value": "content_category",
                "displayValue": "Content Category"
              },
              {
                "value": "content_brand",
                "displayValue": "Content Brand"
              }
            ]
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "type": "SIMPLE_TABLE"
      }
    ],
    "help": "See \u003ca href\u003d\"https://s.pinimg.com/ct/docs/conversions_api/dist/v3.html\" target\u003d\"_blank\"\u003ethis documentation\u003c/a\u003e for more details on what data parameters you can add to the call."
  },
  {
    "type": "GROUP",
    "name": "tagExecutionConsentSettingsGroup",
    "displayName": "Tag Execution Consent Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "RADIO",
        "name": "adStorageConsent",
        "displayName": "",
        "radioItems": [
          {
            "value": "optional",
            "displayValue": "Send data always"
          },
          {
            "value": "required",
            "displayValue": "Send data in case marketing consent given",
            "help": "Aborts the tag execution if marketing consent (\u003ci\u003ead_storage\u003c/i\u003e Google Consent Mode or Stape\u0027s Data Tag parameter) is not given."
          }
        ],
        "simpleValueType": true,
        "defaultValue": "optional"
      }
    ]
  },
  {
    "displayName": "Logs Settings",
    "name": "logsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ]
  },
  {
    "displayName": "BigQuery Logs Settings",
    "name": "bigQueryLogsGroup",
    "groupStyle": "ZIPPY_CLOSED",
    "type": "GROUP",
    "subParams": [
      {
        "type": "RADIO",
        "name": "bigQueryLogType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log to BigQuery"
          },
          {
            "value": "always",
            "displayValue": "Log to BigQuery"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "no"
      },
      {
        "type": "GROUP",
        "name": "logsBigQueryConfigGroup",
        "groupStyle": "NO_ZIPPY",
        "subParams": [
          {
            "type": "TEXT",
            "name": "logBigQueryProjectId",
            "displayName": "BigQuery Project ID",
            "simpleValueType": true,
            "help": "Optional.  \u003cbr/\u003e\u003cbr/\u003e  If omitted, it will be retrieved from the environment variable \u003cI\u003eGOOGLE_CLOUD_PROJECT\u003c/i\u003e where the server container is running. If the server container is running on Google Cloud, \u003cI\u003eGOOGLE_CLOUD_PROJECT\u003c/i\u003e will already be set to the Google Cloud project\u0027s ID."
          },
          {
            "type": "TEXT",
            "name": "logBigQueryDatasetId",
            "displayName": "BigQuery Dataset ID",
            "simpleValueType": true,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "TEXT",
            "name": "logBigQueryTableId",
            "displayName": "BigQuery Table ID",
            "simpleValueType": true,
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          }
        ],
        "enablingConditions": [
          {
            "paramName": "bigQueryLogType",
            "paramValue": "always",
            "type": "EQUALS"
          }
        ]
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

/// <reference path="./server-gtm-sandboxed-apis.d.ts" />

const BigQuery = require('BigQuery');
const JSON = require('JSON');
const Math = require('Math');
const Object = require('Object');
const encodeUri = require('encodeUri');
const getAllEventData = require('getAllEventData');
const getContainerVersion = require('getContainerVersion');
const getCookieValues = require('getCookieValues');
const getRequestHeader = require('getRequestHeader');
const getTimestampMillis = require('getTimestampMillis');
const getType = require('getType');
const logToConsole = require('logToConsole');
const makeInteger = require('makeInteger');
const makeString = require('makeString');
const parseUrl = require('parseUrl');
const sendHttpRequest = require('sendHttpRequest');
const setCookie = require('setCookie');
const sha256Sync = require('sha256Sync');

/*==============================================================================
==============================================================================*/

const eventData = getAllEventData();

if (!isConsentGivenOrNotRequired(data, eventData)) {
  return data.gtmOnSuccess();
}

const url = eventData.page_location || getRequestHeader('referer');
if (url && url.lastIndexOf('https://gtm-msr.appspot.com/', 0) === 0) {
  return data.gtmOnSuccess();
}

const commonCookie = eventData.common_cookie || {};

let postUrl =
  'https://api.pinterest.com/v5/ad_accounts/' + encodeUri(data.advertiserId) + '/events';
setClickIdCookieIfNeeded();
const mappedEventData = mapEvent(eventData, data);
const postBody = { data: [mappedEventData] };

if (data.testMode) {
  postUrl = postUrl + '?test=true';
}

log({
  Name: 'Pinterest',
  Type: 'Request',
  EventName: mappedEventData.event_name,
  RequestMethod: 'POST',
  RequestUrl: postUrl,
  RequestBody: postBody
});

sendHttpRequest(
  postUrl,
  (statusCode, headers, body) => {
    log({
      Name: 'Pinterest',
      Type: 'Response',
      EventName: mappedEventData.event_name,
      ResponseStatusCode: statusCode,
      ResponseHeaders: headers,
      ResponseBody: body
    });

    if (!data.useOptimisticScenario) {
      if (statusCode >= 200 && statusCode < 300) {
        data.gtmOnSuccess();
      } else {
        data.gtmOnFailure();
      }
    }
  },
  {
    headers: {
      'content-type': 'application/json',
      Authorization: 'Bearer ' + data.apiAccessToken
    },
    method: 'POST'
  },
  JSON.stringify(postBody)
);

if (data.useOptimisticScenario) {
  data.gtmOnSuccess();
}

/*==============================================================================
  Vendor related functions
==============================================================================*/

function getEventName(eventData, data) {
  if (data.eventType === 'inherit') {
    let eventName = eventData.event_name;
    eventName = eventName.toLowerCase().trim();
    let gaToEventName = {
      page_view: 'page_visit',
      'gtm.dom': 'page_visit',
      add_payment_info: 'add_payment_info',
      add_to_cart: 'add_to_cart',
      add_to_wishlist: 'add_to_wishlist',
      sign_up: 'signup',
      begin_checkout: 'initiate_checkout',
      generate_lead: 'lead',
      purchase: 'checkout',
      search: 'search',
      view_item_list: 'view_category',
      view_item: 'view_content',

      contact: 'lead',
      customize_product: 'custom',
      donate: 'custom',
      find_location: 'search',
      schedule: 'custom',
      start_trial: 'custom',
      submit_application: 'lead',
      subscribe: 'subscribe',

      'gtm4wp.addProductToCartEEC': 'add_to_cart',
      'gtm4wp.productClickEEC': 'custom',
      'gtm4wp.checkoutOptionEEC': 'custom',
      'gtm4wp.checkoutStepEEC': 'initiate_checkout',
      'gtm4wp.orderCompletedEEC': 'checkout'
    };

    if (!gaToEventName[eventName]) {
      return 'custom';
    }

    return gaToEventName[eventName];
  }
  return data.eventNameStandard;
}

function mapEvent(eventData, data) {
  let eventName = getEventName(eventData, data);

  let mappedData = {
    event_name: eventName,
    action_source: data.actionSource || 'web',
    partner_name: 'ss-stape',
    event_time: Math.round(getTimestampMillis() / 1000),
    custom_data: {
      np: 'ss-stape'
    },
    user_data: {}
  };

  if (mappedData.action_source === 'web') {
    mappedData.event_source_url = eventData.page_location;
    mappedData.user_data = {
      client_ip_address: eventData.ip_override,
      client_user_agent: eventData.user_agent
    };
  }

  mappedData = addServerEventData(eventData, data, mappedData);
  mappedData = addUserData(eventData, mappedData);
  mappedData = addEcommerceData(eventData, mappedData);
  mappedData = overrideDataIfNeeded(data, mappedData);
  mappedData = fixValueTypes(mappedData);
  mappedData = cleanupData(mappedData);
  mappedData = hashDataIfNeeded(mappedData);

  return mappedData;
}

function hashData(key, value) {
  if (!value) return value;

  const type = getType(value);

  if (value === 'undefined' || value === 'null') return undefined;

  if (type === 'array') {
    return value.map((val) => hashData(val));
  }

  if (type === 'object') {
    return Object.keys(value).reduce((acc, val) => {
      acc[val] = hashData(value[val]);
      return acc;
    }, {});
  }

  if (isHashed(value)) return value;

  value = makeString(value).trim().toLowerCase();

  if (key === 'ph') {
    value = value
      .split(' ')
      .join('')
      .split('-')
      .join('')
      .split('(')
      .join('')
      .split(')')
      .join('')
      .split('+')
      .join('');
  } else if (key === 'ct') {
    value = value.split(' ').join('');
  }

  return sha256Sync(value, { outputEncoding: 'hex' });
}

function hashDataIfNeeded(mappedData) {
  if (mappedData.user_data) {
    for (let key in mappedData.user_data) {
      if (
        key === 'em' ||
        key === 'ph' ||
        key === 'ge' ||
        key === 'db' ||
        key === 'ln' ||
        key === 'fn' ||
        key === 'ct' ||
        key === 'st' ||
        key === 'zp' ||
        key === 'country' ||
        key === 'hashed_maids' ||
        key === 'external_id'
      ) {
        let hashedValue = hashData(key, mappedData.user_data[key]);
        let type = getType(hashedValue);

        if (type !== 'undefined' && hashedValue !== 'undefined') {
          if (type !== 'object' && type !== 'array') {
            hashedValue = [hashedValue];
          }

          mappedData.user_data[key] = hashedValue;
        }
      }
    }
  }

  return mappedData;
}

function overrideDataIfNeeded(data, mappedData) {
  if (data.userDataList) {
    data.userDataList.forEach((d) => {
      mappedData.user_data[d.name] = d.value;
    });
  }

  if (data.customDataList) {
    data.customDataList.forEach((d) => {
      mappedData.custom_data[d.name] = d.value;
    });
  }
  if (data.serverEventDataList) {
    data.serverEventDataList.forEach((d) => {
      mappedData[d.name] = d.value;
    });
  }

  return mappedData;
}

function cleanupData(mappedData) {
  if (mappedData.user_data) {
    let userData = {};

    for (let userDataKey in mappedData.user_data) {
      if (mappedData.user_data[userDataKey]) {
        userData[userDataKey] = mappedData.user_data[userDataKey];
      }
    }

    mappedData.user_data = userData;
  }

  if (mappedData.custom_data) {
    let customData = {};

    for (let customDataKey in mappedData.custom_data) {
      if (mappedData.custom_data[customDataKey] || customDataKey === 'value') {
        customData[customDataKey] = mappedData.custom_data[customDataKey];
      }
    }

    mappedData.custom_data = customData;
  }

  return mappedData;
}

function addEcommerceData(eventData, mappedData) {
  let currencyFromItems = '';
  let valueFromItems = 0;
  let numItems = 0;
  let contentIds = [];

  if (eventData.items && eventData.items[0]) {
    mappedData.custom_data.contents = [];
    currencyFromItems = eventData.items[0].currency;

    eventData.items.forEach((d, i) => {
      let content = {};

      if (d.item_id) contentIds.push(d.item_id);
      if (d.quantity) {
        content.quantity = makeInteger(d.quantity);
        numItems += makeInteger(d.quantity);
      }

      if (d.price) {
        content.item_price = makeString(d.price);
        valueFromItems += d.quantity ? d.quantity * d.price : d.price;
      }

      mappedData.custom_data.contents[i] = content;
    });
  }

  if (eventData['x-ga-mp1-ev']) mappedData.custom_data.value = eventData['x-ga-mp1-ev'];
  else if (eventData['x-ga-mp1-tr']) mappedData.custom_data.value = eventData['x-ga-mp1-tr'];
  else if (eventData.value) mappedData.custom_data.value = makeString(eventData.value);
  else if (valueFromItems) mappedData.custom_data.value = makeString(valueFromItems);

  if (eventData.currency) mappedData.custom_data.currency = eventData.currency;
  else if (currencyFromItems) mappedData.custom_data.currency = currencyFromItems;

  if (contentIds.length) mappedData.custom_data.content_ids = contentIds;
  if (numItems) mappedData.custom_data.num_items = makeInteger(numItems);

  if (eventData.search_term) mappedData.custom_data.search_string = eventData.search_term;
  if (eventData.transaction_id) mappedData.custom_data.order_id = eventData.transaction_id;

  if (eventData.opt_out_type) mappedData.custom_data.opt_out_type = eventData.opt_out_type;
  if (eventData.content_name) mappedData.custom_data.content_name = eventData.content_name;
  if (eventData.content_category)
    mappedData.custom_data.content_category = eventData.content_category;
  if (eventData.content_brand) mappedData.custom_data.content_brand = eventData.content_brand;
  return mappedData;
}

function addUserData(eventData, mappedData) {
  let address = {};
  let user_data = {};
  if (getType(eventData.user_data) === 'object') {
    user_data = eventData.user_data;
    const addressType = getType(user_data.address);
    if (addressType === 'object' || addressType === 'array') {
      address = user_data.address[0] || user_data.address;
    }
  }

  if (eventData.external_id) mappedData.user_data.external_id = eventData.external_id;
  else if (eventData.user_id) mappedData.user_data.external_id = eventData.user_id;
  else if (eventData.userId) mappedData.user_data.external_id = eventData.userId;

  if (eventData.lastName) mappedData.user_data.ln = eventData.lastName;
  else if (eventData.LastName) mappedData.user_data.ln = eventData.LastName;
  else if (eventData.nameLast) mappedData.user_data.ln = eventData.nameLast;
  else if (eventData.last_name) mappedData.user_data.ln = eventData.last_name;
  else if (user_data.last_name) mappedData.user_data.ln = user_data.last_name;
  else if (address.last_name) mappedData.user_data.ln = address.last_name;

  if (eventData.firstName) mappedData.user_data.fn = eventData.firstName;
  else if (eventData.FirstName) mappedData.user_data.fn = eventData.FirstName;
  else if (eventData.nameFirst) mappedData.user_data.fn = eventData.nameFirst;
  else if (eventData.first_name) mappedData.user_data.fn = eventData.first_name;
  else if (user_data.first_name) mappedData.user_data.fn = user_data.first_name;
  else if (address.first_name) mappedData.user_data.fn = address.first_name;

  if (eventData.email) mappedData.user_data.em = eventData.email;
  else if (user_data.email_address) mappedData.user_data.em = user_data.email_address;
  else if (user_data.email) mappedData.user_data.em = user_data.email;

  if (eventData.phone) mappedData.user_data.ph = eventData.phone;
  else if (user_data.phone_number) mappedData.user_data.ph = user_data.phone_number;

  if (eventData.city) mappedData.user_data.ct = eventData.city;
  else if (address.city) mappedData.user_data.ct = address.city;

  if (eventData.state) mappedData.user_data.st = eventData.state;
  else if (eventData.region) mappedData.user_data.st = eventData.region;
  else if (user_data.region) mappedData.user_data.st = user_data.region;
  else if (address.region) mappedData.user_data.st = address.region;

  if (eventData.zip) mappedData.user_data.zp = eventData.zip;
  else if (eventData.postal_code) mappedData.user_data.zp = eventData.postal_code;
  else if (user_data.postal_code) mappedData.user_data.zp = user_data.postal_code;
  else if (address.postal_code) mappedData.user_data.zp = address.postal_code;

  if (eventData.countryCode) mappedData.user_data.country = eventData.countryCode;
  else if (eventData.country) mappedData.user_data.country = eventData.country;
  else if (user_data.country) mappedData.user_data.country = user_data.country;
  else if (address.country) mappedData.user_data.country = address.country;

  if (eventData.gender) mappedData.user_data.ge = eventData.gender;
  if (eventData.db) mappedData.user_data.db = eventData.db;
  if (eventData.hashed_maids) mappedData.user_data.hashed_maids = eventData.hashed_maids;
  const click_id = getCookieValues('_epik')[0] || commonCookie._epik || eventData.click_id || '';
  if (click_id) mappedData.user_data.click_id = click_id;

  return mappedData;
}

function addServerEventData(eventData, data, mappedData) {
  if (eventData.event_id) mappedData.event_id = eventData.event_id;
  else if (eventData.transaction_id) mappedData.event_id = eventData.transaction_id;

  return mappedData;
}

function setClickIdCookieIfNeeded() {
  const url = eventData.page_location || getRequestHeader('referer');
  const searchParams = (parseUrl(url) || {}).searchParams;
  if (searchParams && searchParams.epik) {
    setCookie('_epik', searchParams.epik, {
      domain: 'auto',
      path: '/',
      samesite: 'Lax',
      secure: true,
      httpOnly: false,
      'max-age': 31536000 // 1 year
    });
  }
}

function fixValueTypes(mappedData) {
  const valueType = getType(mappedData.custom_data.value);
  if (valueType === 'number') {
    mappedData.custom_data.value = makeString(mappedData.custom_data.value);
  }
  if (mappedData.custom_data.contents) {
    mappedData.custom_data.contents.forEach((content) => {
      if (getType(content.item_price) === 'number') {
        content.item_price = makeString(content.item_price);
      }
    });
  }
  return mappedData;
}

/*==============================================================================
  Helpers
==============================================================================*/

function isHashed(value) {
  if (!value) return false;
  return makeString(value).match('^[A-Fa-f0-9]{64}$') !== null;
}

function isConsentGivenOrNotRequired(data, eventData) {
  if (data.adStorageConsent !== 'required') return true;
  if (eventData.consent_state) return !!eventData.consent_state.ad_storage;
  const xGaGcs = eventData['x-ga-gcs'] || ''; // x-ga-gcs is a string like "G110"
  return xGaGcs[2] === '1';
}

function log(rawDataToLog) {
  const logDestinationsHandlers = {};
  if (determinateIsLoggingEnabled()) logDestinationsHandlers.console = logConsole;
  if (determinateIsLoggingEnabledForBigQuery()) logDestinationsHandlers.bigQuery = logToBigQuery;

  rawDataToLog.TraceId = getRequestHeader('trace-id');

  const keyMappings = {
    // No transformation for Console is needed.
    bigQuery: {
      Name: 'tag_name',
      Type: 'type',
      TraceId: 'trace_id',
      EventName: 'event_name',
      RequestMethod: 'request_method',
      RequestUrl: 'request_url',
      RequestBody: 'request_body',
      ResponseStatusCode: 'response_status_code',
      ResponseHeaders: 'response_headers',
      ResponseBody: 'response_body'
    }
  };

  for (const logDestination in logDestinationsHandlers) {
    const handler = logDestinationsHandlers[logDestination];
    if (!handler) continue;

    const mapping = keyMappings[logDestination];
    const dataToLog = mapping ? {} : rawDataToLog;

    if (mapping) {
      for (const key in rawDataToLog) {
        const mappedKey = mapping[key] || key;
        dataToLog[mappedKey] = rawDataToLog[key];
      }
    }

    handler(dataToLog);
  }
}

function logConsole(dataToLog) {
  logToConsole(JSON.stringify(dataToLog));
}

function logToBigQuery(dataToLog) {
  const connectionInfo = {
    projectId: data.logBigQueryProjectId,
    datasetId: data.logBigQueryDatasetId,
    tableId: data.logBigQueryTableId
  };

  dataToLog.timestamp = getTimestampMillis();

  ['request_body', 'response_headers', 'response_body'].forEach((p) => {
    dataToLog[p] = JSON.stringify(dataToLog[p]);
  });

  BigQuery.insert(connectionInfo, [dataToLog], { ignoreUnknownValues: true });
}

function determinateIsLoggingEnabled() {
  const containerVersion = getContainerVersion();
  const isDebug = !!(
    containerVersion &&
    (containerVersion.debugMode || containerVersion.previewMode)
  );

  if (!data.logType) {
    return isDebug;
  }

  if (data.logType === 'no') {
    return false;
  }

  if (data.logType === 'debug') {
    return isDebug;
  }

  return data.logType === 'always';
}

function determinateIsLoggingEnabledForBigQuery() {
  if (data.bigQueryLogType === 'no') return false;
  return data.bigQueryLogType === 'always';
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://api.pinterest.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "trace-id"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "referer"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "queryParametersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "queryParameter"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "epik"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "_epik"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "_epik"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_bigquery",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedTables",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "projectId"
                  },
                  {
                    "type": 1,
                    "string": "datasetId"
                  },
                  {
                    "type": 1,
                    "string": "tableId"
                  },
                  {
                    "type": 1,
                    "string": "operation"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: UI Check
  code: |-
    let actualSuccessCallback, httpBody;

    mock('sendHttpRequest', (postUrl, response, options, body) => {
      actualSuccessCallback = response;
      httpBody = body;
      actualSuccessCallback(200, {}, '');
    });

    runCode(mockData);
- name: '[Logs] Should log to console'
  code: "const originalMockData = mockData;\n\n[\n  // if the 'Always log to console'\
    \ option is selected\n  { mockData: { logType: 'always' }, expectedDebugMode:\
    \ true },\n  // if the 'Log during debug and preview' option is selected AND is\
    \ on preview mode\n  { mockData: { logType: 'debug' }, expectedDebugMode: true\
    \ },\n].forEach(scenario => {\n  const copyMockData = JSON.parse(JSON.stringify(originalMockData));\n\
    \  mergeObj(copyMockData, scenario.mockData);\n  \n  mock('getContainerVersion',\
    \ () => {\n    return {\n      debugMode: scenario.expectedDebugMode\n    };\n\
    \  }); \n  \n  mock('logToConsole', (logData) => {\n    const parsedLogData =\
    \ JSON.parse(logData);\n    requiredConsoleKeys.forEach(p => assertThat(parsedLogData[p]).isDefined());\n\
    \  });\n  \n  runCode(copyMockData);\n  \n  assertApi('logToConsole').wasCalled();\n\
    \  assertApi('gtmOnSuccess').wasCalled();\n  assertApi('gtmOnFailure').wasNotCalled();\n\
    });"
- name: '[Logs] Should NOT log to console'
  code: "const originalMockData = mockData;\n\nmockData.logType = 'debug';\n\n[\n\
    \  // if the 'Log during debug and preview' option is selected AND is NOT on preview\
    \ mode\n  { mockData: { logType: 'debug' }, expectedDebugMode: false },\n  //\
    \ if the 'Do not log' option is selected\n  { mockData: { logType: 'no' }, expectedDebugMode:\
    \ undefined },\n].forEach(scenario => {\n  const copyMockData = JSON.parse(JSON.stringify(originalMockData));\n\
    \  mergeObj(copyMockData, scenario.mockData);\n  \n  mock('getContainerVersion',\
    \ () => {\n    return {\n      debugMode: scenario.expectedDebugMode\n    };\n\
    \  });\n  \n  runCode(copyMockData);\n\n  assertApi('logToConsole').wasNotCalled();\n\
    \  assertApi('gtmOnSuccess').wasCalled();\n  assertApi('gtmOnFailure').wasNotCalled();\n\
    });"
- name: '[Logs] Should NOT log to BQ, if the ''Do not log to BigQuery'' option is
    selected'
  code: "const originalMockData = mockData;\n\nmockData.bigQueryLogType = 'no';\n\n\
    // assertApi doesn't work for 'BigQuery.insert()'.\n// Ref: https://gtm-gear.com/posts/gtm-templates-testing/\n\
    mockObject('BigQuery', {\n  insert: (connectionInfo, rows, options) => { \n  \
    \  fail('BigQuery.insert should not have been called.');\n    return Promise.create((resolve,\
    \ reject) => {\n      resolve();\n    });\n  }\n});\n\nrunCode(mockData);\n\n\
    assertApi('gtmOnSuccess').wasCalled();\nassertApi('gtmOnFailure').wasNotCalled();"
- name: '[Logs] Should log to BQ, if the ''Log to BigQuery'' option is selected'
  code: "const originalMockData = mockData;\n\nmockData.bigQueryLogType = 'always';\n\
    \n// assertApi doesn't work for 'BigQuery.insert()'.\n// Ref: https://gtm-gear.com/posts/gtm-templates-testing/\n\
    mockObject('BigQuery', {\n  insert: (connectionInfo, rows, options) => { \n  \
    \  assertThat(connectionInfo).isDefined();\n    assertThat(rows).isArray();\n\
    \    assertThat(rows).hasLength(1);\n    requiredBqKeys.forEach(p => assertThat(rows[0][p]).isDefined());\n\
    \    assertThat(options).isEqualTo(expectedBqOptions);\n    return Promise.create((resolve,\
    \ reject) => {\n      resolve();\n    });\n  }\n});\n\nrunCode(mockData);\n\n\
    assertApi('gtmOnSuccess').wasCalled();\nassertApi('gtmOnFailure').wasNotCalled();"
setup: "const JSON = require('JSON');\nconst Promise = require('Promise');\nconst\
  \ parseUrl = require('parseUrl');\nconst Object = require('Object');\nconst makeInteger\
  \ = require('makeInteger');\n\nfunction mergeObj(target, source) {\n  for (const\
  \ key in source) {\n    if (source.hasOwnProperty(key)) target[key] = source[key];\n\
  \  }\n  return target;\n}\n\nconst expectedBigQuerySettings = {\n  logBigQueryProjectId:\
  \ 'logBigQueryProjectId',\n  logBigQueryDatasetId: 'logBigQueryDatasetId',\n  logBigQueryTableId:\
  \ 'logBigQueryTableId'\n};\n\nconst requiredConsoleKeys = ['Type', 'TraceId', 'Name'];\n\
  const requiredBqKeys = ['timestamp', 'type', 'trace_id', 'tag_name'];\nconst expectedBqOptions\
  \ = { ignoreUnknownValues: true };\n\nconst mockData = {};\n\nmock('sendHttpRequest',\
  \ (requestUrl, callback, requestOptions, requestBody) => {\n  if (typeof callback\
  \ === 'function') {\n    callback(200);\n  } else {\n    requestBody = requestOptions;\n\
  \    requestOptions = callback;\n    return Promise.create((resolve, reject) =>\
  \ {\n      resolve({ statusCode: 200 });\n    });  \n  }\n});\n\nmock('getRequestHeader',\
  \ (header) => {\n  if (header === 'trace-id') return 'expectedTraceId';\n  if (header\
  \ === 'referer') return 'https://example.com';\n});\n\nmock('getTimestampMillis',\
  \ 1747945830456);"


___NOTES___

Created on 8/20/2025, 2:02:02 PM

